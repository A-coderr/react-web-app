{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getResponse = exports.getStatusCode = exports.argumentsFor = exports.getServiceMethod = exports.knownMethods = exports.statusCodes = exports.METHOD_HEADER = void 0;\nconst lib_1 = require(\"@feathersjs/errors/lib\");\nconst encodeurl_1 = __importDefault(require(\"encodeurl\"));\nexports.METHOD_HEADER = 'x-service-method';\nexports.statusCodes = {\n  created: 201,\n  noContent: 204,\n  methodNotAllowed: 405,\n  success: 200,\n  seeOther: 303\n};\nexports.knownMethods = {\n  post: 'create',\n  patch: 'patch',\n  put: 'update',\n  delete: 'remove'\n};\nfunction getServiceMethod(_httpMethod, id, headerOverride) {\n  const httpMethod = _httpMethod.toLowerCase();\n  if (httpMethod === 'post' && headerOverride) {\n    return headerOverride;\n  }\n  const mappedMethod = exports.knownMethods[httpMethod];\n  if (mappedMethod) {\n    return mappedMethod;\n  }\n  if (httpMethod === 'get') {\n    return id === null ? 'find' : 'get';\n  }\n  throw new lib_1.MethodNotAllowed(`Method ${_httpMethod} not allowed`);\n}\nexports.getServiceMethod = getServiceMethod;\nexports.argumentsFor = {\n  get: ({\n    id,\n    params\n  }) => [id, params],\n  find: ({\n    params\n  }) => [params],\n  create: ({\n    data,\n    params\n  }) => [data, params],\n  update: ({\n    id,\n    data,\n    params\n  }) => [id, data, params],\n  patch: ({\n    id,\n    data,\n    params\n  }) => [id, data, params],\n  remove: ({\n    id,\n    params\n  }) => [id, params],\n  default: ({\n    data,\n    params\n  }) => [data, params]\n};\nfunction getStatusCode(context, body, location) {\n  const {\n    http = {}\n  } = context;\n  if (http.status) {\n    return http.status;\n  }\n  if (context.method === 'create') {\n    return exports.statusCodes.created;\n  }\n  if (location !== undefined) {\n    return exports.statusCodes.seeOther;\n  }\n  if (!body) {\n    return exports.statusCodes.noContent;\n  }\n  return exports.statusCodes.success;\n}\nexports.getStatusCode = getStatusCode;\nfunction getResponse(context) {\n  const {\n    http = {}\n  } = context;\n  const body = context.dispatch !== undefined ? context.dispatch : context.result;\n  let headers = http.headers || {};\n  let location = headers.Location;\n  if (http.location !== undefined) {\n    location = (0, encodeurl_1.default)(http.location);\n    headers = {\n      ...headers,\n      Location: location\n    };\n  }\n  const status = getStatusCode(context, body, location);\n  return {\n    status,\n    headers,\n    body\n  };\n}\nexports.getResponse = getResponse;","map":{"version":3,"names":["lib_1","require","encodeurl_1","__importDefault","exports","METHOD_HEADER","statusCodes","created","noContent","methodNotAllowed","success","seeOther","knownMethods","post","patch","put","delete","getServiceMethod","_httpMethod","id","headerOverride","httpMethod","toLowerCase","mappedMethod","MethodNotAllowed","argumentsFor","get","params","find","create","data","update","remove","default","getStatusCode","context","body","location","http","status","method","undefined","getResponse","dispatch","result","headers","Location"],"sources":["C:\\Users\\VARLab ROG 1\\Documents\\workspace\\web\\react-frontend\\node_modules\\@feathersjs\\transport-commons\\src\\http.ts"],"sourcesContent":["import { MethodNotAllowed } from '@feathersjs/errors/lib'\nimport { HookContext, NullableId, Params } from '@feathersjs/feathers'\nimport encodeUrl from 'encodeurl'\n\nexport const METHOD_HEADER = 'x-service-method'\n\nexport interface ServiceParams {\n  id: NullableId\n  data: any\n  params: Params\n}\n\nexport const statusCodes = {\n  created: 201,\n  noContent: 204,\n  methodNotAllowed: 405,\n  success: 200,\n  seeOther: 303\n}\n\nexport const knownMethods: { [key: string]: string } = {\n  post: 'create',\n  patch: 'patch',\n  put: 'update',\n  delete: 'remove'\n}\n\nexport function getServiceMethod(_httpMethod: string, id: unknown, headerOverride?: string) {\n  const httpMethod = _httpMethod.toLowerCase()\n\n  if (httpMethod === 'post' && headerOverride) {\n    return headerOverride\n  }\n\n  const mappedMethod = knownMethods[httpMethod]\n\n  if (mappedMethod) {\n    return mappedMethod\n  }\n\n  if (httpMethod === 'get') {\n    return id === null ? 'find' : 'get'\n  }\n\n  throw new MethodNotAllowed(`Method ${_httpMethod} not allowed`)\n}\n\nexport const argumentsFor = {\n  get: ({ id, params }: ServiceParams) => [id, params],\n  find: ({ params }: ServiceParams) => [params],\n  create: ({ data, params }: ServiceParams) => [data, params],\n  update: ({ id, data, params }: ServiceParams) => [id, data, params],\n  patch: ({ id, data, params }: ServiceParams) => [id, data, params],\n  remove: ({ id, params }: ServiceParams) => [id, params],\n  default: ({ data, params }: ServiceParams) => [data, params]\n}\n\nexport function getStatusCode(context: HookContext, body: any, location: string | string[]) {\n  const { http = {} } = context\n\n  if (http.status) {\n    return http.status\n  }\n\n  if (context.method === 'create') {\n    return statusCodes.created\n  }\n\n  if (location !== undefined) {\n    return statusCodes.seeOther\n  }\n\n  if (!body) {\n    return statusCodes.noContent\n  }\n\n  return statusCodes.success\n}\n\nexport function getResponse(context: HookContext) {\n  const { http = {} } = context\n  const body = context.dispatch !== undefined ? context.dispatch : context.result\n\n  let headers = http.headers || {}\n  let location = headers.Location\n\n  if (http.location !== undefined) {\n    location = encodeUrl(http.location)\n    headers = { ...headers, Location: location }\n  }\n\n  const status = getStatusCode(context, body, location)\n\n  return { status, headers, body }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}