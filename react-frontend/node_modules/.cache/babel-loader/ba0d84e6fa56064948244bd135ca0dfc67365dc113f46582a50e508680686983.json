{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Channel = void 0;\nconst events_1 = require(\"events\");\nclass Channel extends events_1.EventEmitter {\n  constructor(connections = [], data = null) {\n    super();\n    this.connections = connections;\n    this.data = data;\n  }\n  get length() {\n    return this.connections.length;\n  }\n  leave(...connections) {\n    connections.forEach(current => {\n      if (typeof current === 'function') {\n        const callback = current;\n        this.leave(...this.connections.filter(callback));\n      } else {\n        const index = this.connections.indexOf(current);\n        if (index !== -1) {\n          this.connections.splice(index, 1);\n        }\n      }\n    });\n    if (this.length === 0) {\n      this.emit('empty');\n    }\n    return this;\n  }\n  join(...connections) {\n    connections.forEach(connection => {\n      if (connection && this.connections.indexOf(connection) === -1) {\n        this.connections.push(connection);\n      }\n    });\n    return this;\n  }\n  filter(fn) {\n    return new Channel(this.connections.filter(fn), this.data);\n  }\n  send(data) {\n    return new Channel(this.connections, data);\n  }\n}\nexports.Channel = Channel;","map":{"version":3,"names":["events_1","require","Channel","EventEmitter","constructor","connections","data","length","leave","forEach","current","callback","filter","index","indexOf","splice","emit","join","connection","push","fn","send","exports"],"sources":["C:\\Users\\VARLab ROG 1\\Documents\\workspace\\web\\react-frontend\\node_modules\\@feathersjs\\transport-commons\\src\\channels\\channel\\base.ts"],"sourcesContent":["import { EventEmitter } from 'events'\nimport { RealTimeConnection } from '@feathersjs/feathers'\n\nexport class Channel extends EventEmitter {\n  connections: RealTimeConnection[]\n  data: any\n\n  constructor(connections: RealTimeConnection[] = [], data: any = null) {\n    super()\n\n    this.connections = connections\n    this.data = data\n  }\n\n  get length() {\n    return this.connections.length\n  }\n\n  leave(...connections: RealTimeConnection[]) {\n    connections.forEach((current) => {\n      if (typeof current === 'function') {\n        const callback = current as (connection: RealTimeConnection) => boolean\n\n        this.leave(...this.connections.filter(callback))\n      } else {\n        const index = this.connections.indexOf(current)\n\n        if (index !== -1) {\n          this.connections.splice(index, 1)\n        }\n      }\n    })\n\n    if (this.length === 0) {\n      this.emit('empty')\n    }\n\n    return this\n  }\n\n  join(...connections: RealTimeConnection[]) {\n    connections.forEach((connection) => {\n      if (connection && this.connections.indexOf(connection) === -1) {\n        this.connections.push(connection)\n      }\n    })\n\n    return this\n  }\n\n  filter(fn: (connection: RealTimeConnection) => boolean) {\n    return new Channel(this.connections.filter(fn), this.data)\n  }\n\n  send(data: any) {\n    return new Channel(this.connections, data)\n  }\n}\n"],"mappings":";;;;;;AAAA,MAAAA,QAAA,GAAAC,OAAA;AAGA,MAAaC,OAAQ,SAAQF,QAAA,CAAAG,YAAY;EAIvCC,YAAYC,WAAA,GAAoC,EAAE,EAAEC,IAAA,GAAY,IAAI;IAClE,KAAK,EAAE;IAEP,IAAI,CAACD,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACC,IAAI,GAAGA,IAAI;EAClB;EAEA,IAAIC,MAAMA,CAAA;IACR,OAAO,IAAI,CAACF,WAAW,CAACE,MAAM;EAChC;EAEAC,KAAKA,CAAC,GAAGH,WAAiC;IACxCA,WAAW,CAACI,OAAO,CAAEC,OAAO,IAAI;MAC9B,IAAI,OAAOA,OAAO,KAAK,UAAU,EAAE;QACjC,MAAMC,QAAQ,GAAGD,OAAsD;QAEvE,IAAI,CAACF,KAAK,CAAC,GAAG,IAAI,CAACH,WAAW,CAACO,MAAM,CAACD,QAAQ,CAAC,CAAC;MAClD,CAAC,MAAM;QACL,MAAME,KAAK,GAAG,IAAI,CAACR,WAAW,CAACS,OAAO,CAACJ,OAAO,CAAC;QAE/C,IAAIG,KAAK,KAAK,CAAC,CAAC,EAAE;UAChB,IAAI,CAACR,WAAW,CAACU,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;QACnC;MACF;IACF,CAAC,CAAC;IAEF,IAAI,IAAI,CAACN,MAAM,KAAK,CAAC,EAAE;MACrB,IAAI,CAACS,IAAI,CAAC,OAAO,CAAC;IACpB;IAEA,OAAO,IAAI;EACb;EAEAC,IAAIA,CAAC,GAAGZ,WAAiC;IACvCA,WAAW,CAACI,OAAO,CAAES,UAAU,IAAI;MACjC,IAAIA,UAAU,IAAI,IAAI,CAACb,WAAW,CAACS,OAAO,CAACI,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE;QAC7D,IAAI,CAACb,WAAW,CAACc,IAAI,CAACD,UAAU,CAAC;MACnC;IACF,CAAC,CAAC;IAEF,OAAO,IAAI;EACb;EAEAN,MAAMA,CAACQ,EAA+C;IACpD,OAAO,IAAIlB,OAAO,CAAC,IAAI,CAACG,WAAW,CAACO,MAAM,CAACQ,EAAE,CAAC,EAAE,IAAI,CAACd,IAAI,CAAC;EAC5D;EAEAe,IAAIA,CAACf,IAAS;IACZ,OAAO,IAAIJ,OAAO,CAAC,IAAI,CAACG,WAAW,EAAEC,IAAI,CAAC;EAC5C;;AArDFgB,OAAA,CAAApB,OAAA,GAAAA,OAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}