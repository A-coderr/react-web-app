{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Router = exports.RouteNode = void 0;\nconst commons_1 = require(\"@feathersjs/commons\");\nclass RouteNode {\n  constructor(name, depth) {\n    this.name = name;\n    this.depth = depth;\n    this.children = {};\n    this.placeholders = [];\n  }\n  get hasChildren() {\n    return Object.keys(this.children).length !== 0 || this.placeholders.length !== 0;\n  }\n  insert(path, data) {\n    if (this.depth === path.length) {\n      if (this.data !== undefined) {\n        throw new Error(`Path ${path.join('/')} already exists`);\n      }\n      this.data = data;\n      return this;\n    }\n    const current = path[this.depth];\n    const nextDepth = this.depth + 1;\n    if (current.startsWith(':')) {\n      // Insert a placeholder node like /messages/:id\n      const placeholderName = current.substring(1);\n      let placeholder = this.placeholders.find(p => p.name === placeholderName);\n      if (!placeholder) {\n        placeholder = new RouteNode(placeholderName, nextDepth);\n        this.placeholders.push(placeholder);\n      }\n      return placeholder.insert(path, data);\n    }\n    const child = this.children[current] || new RouteNode(current, nextDepth);\n    this.children[current] = child;\n    return child.insert(path, data);\n  }\n  remove(path) {\n    if (path.length === this.depth) {\n      return;\n    }\n    const current = path[this.depth];\n    if (current.startsWith(':')) {\n      const placeholderName = current.substring(1);\n      const placeholder = this.placeholders.find(p => p.name === placeholderName);\n      placeholder.remove(path);\n      this.placeholders = this.placeholders.filter(p => p !== placeholder);\n    } else if (this.children[current]) {\n      const child = this.children[current];\n      child.remove(path);\n      if (!child.hasChildren) {\n        delete this.children[current];\n      }\n    }\n  }\n  lookup(path, info) {\n    if (path.length === this.depth) {\n      return this.data === undefined ? null : {\n        ...info,\n        data: this.data\n      };\n    }\n    const current = path[this.depth];\n    const child = this.children[current];\n    if (child) {\n      const lookup = child.lookup(path, info);\n      if (lookup !== null) {\n        return lookup;\n      }\n    }\n    // This will return the first placeholder that matches early\n    for (const placeholder of this.placeholders) {\n      const result = placeholder.lookup(path, info);\n      if (result !== null) {\n        result.params[placeholder.name] = current;\n        return result;\n      }\n    }\n    return null;\n  }\n}\nexports.RouteNode = RouteNode;\nclass Router {\n  constructor(root = new RouteNode('', 0)) {\n    this.root = root;\n    this.caseSensitive = true;\n  }\n  getPath(path) {\n    const result = (0, commons_1.stripSlashes)(path).split('/');\n    if (!this.caseSensitive) {\n      return result.map(p => p.startsWith(':') ? p : p.toLowerCase());\n    }\n    return result;\n  }\n  insert(path, data) {\n    return this.root.insert(this.getPath(path), data);\n  }\n  remove(path) {\n    return this.root.remove(this.getPath(path));\n  }\n  lookup(path) {\n    if (typeof path !== 'string') {\n      return null;\n    }\n    return this.root.lookup(this.getPath(path), {\n      params: {}\n    });\n  }\n}\nexports.Router = Router;","map":{"version":3,"names":["commons_1","require","RouteNode","constructor","name","depth","children","placeholders","hasChildren","Object","keys","length","insert","path","data","undefined","Error","join","current","nextDepth","startsWith","placeholderName","substring","placeholder","find","p","push","child","remove","filter","lookup","info","result","params","exports","Router","root","caseSensitive","getPath","stripSlashes","split","map","toLowerCase"],"sources":["C:\\Users\\VARLab ROG 1\\Documents\\workspace\\web\\react-frontend\\node_modules\\@feathersjs\\transport-commons\\src\\routing\\router.ts"],"sourcesContent":["import { stripSlashes } from '@feathersjs/commons'\n\nexport interface LookupData {\n  params: { [key: string]: string }\n}\n\nexport interface LookupResult<T> extends LookupData {\n  data?: T\n}\n\nexport class RouteNode<T = any> {\n  data?: T\n  children: { [key: string]: RouteNode } = {}\n  placeholders: RouteNode[] = []\n\n  constructor(\n    public name: string,\n    public depth: number\n  ) {}\n\n  get hasChildren() {\n    return Object.keys(this.children).length !== 0 || this.placeholders.length !== 0\n  }\n\n  insert(path: string[], data: T): RouteNode<T> {\n    if (this.depth === path.length) {\n      if (this.data !== undefined) {\n        throw new Error(`Path ${path.join('/')} already exists`)\n      }\n\n      this.data = data\n      return this\n    }\n\n    const current = path[this.depth]\n    const nextDepth = this.depth + 1\n\n    if (current.startsWith(':')) {\n      // Insert a placeholder node like /messages/:id\n      const placeholderName = current.substring(1)\n      let placeholder = this.placeholders.find((p) => p.name === placeholderName)\n\n      if (!placeholder) {\n        placeholder = new RouteNode(placeholderName, nextDepth)\n        this.placeholders.push(placeholder)\n      }\n\n      return placeholder.insert(path, data)\n    }\n\n    const child = this.children[current] || new RouteNode(current, nextDepth)\n\n    this.children[current] = child\n\n    return child.insert(path, data)\n  }\n\n  remove(path: string[]) {\n    if (path.length === this.depth) {\n      return\n    }\n\n    const current = path[this.depth]\n\n    if (current.startsWith(':')) {\n      const placeholderName = current.substring(1)\n      const placeholder = this.placeholders.find((p) => p.name === placeholderName)\n\n      placeholder.remove(path)\n      this.placeholders = this.placeholders.filter((p) => p !== placeholder)\n    } else if (this.children[current]) {\n      const child = this.children[current]\n\n      child.remove(path)\n\n      if (!child.hasChildren) {\n        delete this.children[current]\n      }\n    }\n  }\n\n  lookup(path: string[], info: LookupData): LookupResult<T> | null {\n    if (path.length === this.depth) {\n      return this.data === undefined\n        ? null\n        : {\n            ...info,\n            data: this.data\n          }\n    }\n\n    const current = path[this.depth]\n    const child = this.children[current]\n\n    if (child) {\n      const lookup = child.lookup(path, info)\n\n      if (lookup !== null) {\n        return lookup\n      }\n    }\n\n    // This will return the first placeholder that matches early\n    for (const placeholder of this.placeholders) {\n      const result = placeholder.lookup(path, info)\n\n      if (result !== null) {\n        result.params[placeholder.name] = current\n        return result\n      }\n    }\n\n    return null\n  }\n}\n\nexport class Router<T = any> {\n  public caseSensitive = true\n\n  constructor(public root: RouteNode<T> = new RouteNode<T>('', 0)) {}\n\n  getPath(path: string) {\n    const result = stripSlashes(path).split('/')\n\n    if (!this.caseSensitive) {\n      return result.map((p) => (p.startsWith(':') ? p : p.toLowerCase()))\n    }\n\n    return result\n  }\n\n  insert(path: string, data: T) {\n    return this.root.insert(this.getPath(path), data)\n  }\n\n  remove(path: string) {\n    return this.root.remove(this.getPath(path))\n  }\n\n  lookup(path: string) {\n    if (typeof path !== 'string') {\n      return null\n    }\n\n    return this.root.lookup(this.getPath(path), { params: {} })\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}